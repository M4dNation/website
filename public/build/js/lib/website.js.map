{"version":3,"sources":["Application.js","FileManager.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"website.js","sourcesContent":["var Application = (function(Application)\n{\n\tApplication.url = {};\n\n\treturn Application;\n})(Application || {});\n\n$('.testButton').click(function()\n{\n\tvar container = $('#fileManagerModal filemanager-body');\n\tApplication.FileManager.getTree();\n});\n\n\n","var Application = Application || {};\n\nApplication.FileManager = (function(FileManager)\n{\n\tvar _currentUrl = \"media\";\n\tvar _selectedImages = new Array();\n\tvar _idForm = \"\";\n\n\tFileManager.launch = function(idForm)\n\t{\n\t\t_idForm = idForm;\n\t\tApplication.FileManager.getTree();\n\t}\n\n\tFileManager.getTree = function()\n\t{\n\t\tvar path = _currentUrl;\n\t\tif ((/^media/).test(path))\n\t\t{\n\t\t\t$('.treeViewer').empty();\n\t\t\t$('.fileViewer').empty();\n\t\t\t$.when($.ajax(\n\t\t\t{\n\t\t\t\turl: Application.url.fm_getTree,\n\t\t\t\ttype: \"GET\",\n\t\t\t\tdatatype: \"json\",\n\t\t\t\tdata: \"path=\" + path,\n\t\t\t})).then(function(data, status)\n\t\t\t{\n\t\t\t\tif (data !== undefined)\n\t\t\t\t{\n\t\t\t\t\tvar obj = $.parseJSON(data);\n\t\t\t\t\tvar fName, fPath;\n\t\t\t\t\tvar htmlString =\"\";\n\t\t\t\t\t\n\t\t\t\t\tfor(directory in obj.directories)\n\t\t\t\t\t{\n\t\t\t\t\t\t\n\t\t\t\t\t\tfName = Application.FileManager.cleanFolderName(_currentUrl + '/', obj.directories[directory]);\n\t\t\t\t\t\thtmlString += '<div onclick=\"Application.FileManager.down()\" oncontextmenu=\"Application.FileManager.rmdir();\" class=\"col-lg-2 col-md-2 col-sm-2 col-xs-2 text-center\"><i class=\"fa fa-folder-o fa-2x\" aria-hidden=\"true\"></i><p class=\"folderName\">' + fName+'</p></div>';\t\n\t\t\t\t\t}\n\n\t\t\t\t\thtmlString +='<div class=\"row\">';\n\t\t\t\t\tfor(file in obj.files)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(file % 4 === 0 && file !== 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtmlString +='</div><div class=\"row\">';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfPath = Application.FileManager.cleanFolderName(_currentUrl + '/', obj.files[file]);\n\t\t\t\t\t\thtmlString +='<div class=\"col-lg-3 col-md-3 col-sm-12 col-xs-12\"><img onclick=\"Application.FileManager.toggleSelect();\" oncontextmenu=\"Application.FileManager.rm();\" src=\"'+ Application.url.image + obj.files[file] + '\"></img></div>';\t\n\t\t\t\t\t}\n\t\t\t\t\thtmlString +='</div>';\n\t\t\t\t\t$('.fileViewer').append(htmlString);\n\t\t\t\t\t$('#fileManagerModal').modal('show');\n\t\t\t\t}\t\n\t\t\t});\n\t\t}\n\t};\n\n\tFileManager.down = function()\n\t{\n\t\t_currentUrl +=  \"/\" + $(event.target).parents().children(\".folderName\").text();\n\t\t$(\"#pathInput\").attr(\"value\",_currentUrl);\n\t\tApplication.FileManager.getTree(_currentUrl);\n\t}\n\n\tFileManager.up = function()\n\t{\n\t\tif(_currentUrl !== \"media\")\n\t\t{\n\t\t\tvar arrayUrl = _currentUrl.split('/');\n\t\t\tarrayUrl.pop();\n\t\t\t_currentUrl = arrayUrl.join('/');\n\t\t\t$(\"#pathInput\").attr(\"value\",_currentUrl);\n\t\t\tApplication.FileManager.getTree(_currentUrl);\n\t\t}\n\t}\n\n\tFileManager.mkdir = function()\n\t{\n\t\tvar nameFolder = $('#nameFolder').val();\n\t\tif(nameFolder === \"\")\n\t\t{\n\t\t\tswal\n\t\t\t({\n\t\t\t\ttitle: \"Failed!\",\n\t\t\t\ttext: \"You have to enter a name for your new folder.\",\n\t\t\t\ttype: \"error\",\n\t\t\t});\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar path = _currentUrl + '/' +nameFolder;\n\t\t\tswal(\n\t\t\t{\n\t\t\t\ttitle: \"Are you sure?\",\n\t\t\t\ttext: \"The folder \"+ nameFolder + \" will be created.\",\n\t\t\t\ttype: \"info\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonColor: \"#DD6B55\",\n\t\t\t\tconfirmButtonText: \"Yes, create it!\",\n\t\t\t\tcloseOnConfirm: false \n\t\t\t},\n\t\t\tfunction()\n\t\t\t{\n\t\t\t\t$.when($.ajax(\n\t\t\t\t{\n\t\t\t\t\turl: Application.url.fm_mkdir,\n\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\tdatatype: \"json\",\n\t\t\t\t\tdata: \"name=\" + path,\n\t\t\t\t})).then(function(data, status)\n\t\t\t\t{\n\t\t\t\t\tApplication.FileManager.getTree(_currentUrl);\n\t\t\t\t\tswal(\"Success\", \"Folder \" + nameFolder + \" has been created.\", \"success\"); \n\t\t\t\t});\t\t\t\t\t\t\n\t\t\t}); \n\t\t}\n\t};\n\n\tFileManager.rmdir = function()\n\t{\n\t\tevent.preventDefault();\n\n\t\tvar folderName = $(event.target).parents().children(\".folderName\").text();\n\t\tvar path = _currentUrl + \"/\" + folderName;\n\n\t\tswal(\n\t\t{\n\t\t\ttitle: \"Are you sure?\",\n\t\t\ttext: \"You will not be able to recover this folder!\",\n\t\t\ttype: \"warning\",\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: \"#DD6B55\",\n\t\t\tconfirmButtonText: \"Yes, delete it!\",\n\t\t\tcloseOnConfirm: false \n\t\t},\n\t\tfunction()\n\t\t{\n\t\t\t$.when($.ajax(\n\t\t\t{\n\t\t\t\turl: Application.url.fm_rmdir,\n\t\t\t\ttype: \"GET\",\n\t\t\t\tdatatype: \"json\",\n\t\t\t\tdata: \"name=\" + path,\n\t\t\t})).then(function(data, status)\n\t\t\t{\n\t\t\t\tApplication.FileManager.getTree(_currentUrl);\n\t\t\t\tswal(\"Deleted!\", \"Folder \" + folderName + \" has been deleted.\", \"success\"); \n\t\t\t});\t\n\t\t});\n\t};\n\n\tFileManager.rm = function()\n\t{\n\t\tevent.preventDefault();\n\n\t\tvar path = Application.FileManager.cleanFolderName(Application.url.image, $(event.target).attr('src'));\n\n\t\tswal(\n\t\t{\n\t\t\ttitle: \"Are you sure?\",\n\t\t\ttext: \"You will not be able to recover this image!\",\n\t\t\ttype: \"warning\",\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonColor: \"#DD6B55\",\n\t\t\tconfirmButtonText: \"Yes, delete it!\",\n\t\t\tcloseOnConfirm: false \n\t\t},\n\t\tfunction()\n\t\t{\n\t\t\t$.when($.ajax(\n\t\t\t{\n\t\t\t\turl: Application.url.fm_rm,\n\t\t\t\ttype: \"GET\",\n\t\t\t\tdatatype: \"json\",\n\t\t\t\tdata: \"name=\" + path,\n\t\t\t})).then(function(data, status)\n\t\t\t{\n\t\t\t\tApplication.FileManager.getTree(_currentUrl);\n\t\t\t\tswal(\"Deleted!\", \"Image \" + Application.FileManager.cleanFolderName(_currentUrl + '/', path) + \" has been deleted.\", \"success\"); \n\t\t\t});\t\n\t\t});\n\t};\n\n\tFileManager.rename = function()\n\t{\n\n\t};\n\n\tFileManager.cleanFolderName = function(cleaner, path)\n\t{\n\t\treturn path.replace(cleaner, '');\n\t};\n\n\tFileManager.toggleSelect = function()\n\t{\n\t\tvar image = Application.FileManager.cleanFolderName(Application.url.image + _currentUrl + \"/\", $(event.target).attr('src'));\n\n\t\tif(_selectedImages.indexOf(image)<0)\n\t\t{\n\t\t\t_selectedImages.push(image);\n\t\t\t $(event.target).addClass(\"selected\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_selectedImages.pop(image);\n\t\t\t$(event.target).removeClass(\"selected\");\n\t\t} \n\t};\n\n\n\tFileManager.emptySelection = function()\n\t{\n\t\t_selectedImages = new Array();\n\t};\n\n\n\tFileManager.addImages = function()\n\t{\n\t\t$('.selectedImage').remove();\n\t\t$('.thumbnails').empty();\n\t\tfor(i in _selectedImages)\n\t\t{\n\t\t\t$('#'+_idForm).append('<input class=\"selectedImage\" name=\"image' + i + '\" type=\"hidden\" value=\"' + _selectedImages[i] + '\"/>');\n\t\t\t$('.thumbnails').append('<div class=\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"><img src=\"' + Application.url.image + _currentUrl + \"/\" + _selectedImages[i] + '\"/></div>');\n\t\t\t\n\t\t}\n\t\tApplication.FileManager.emptySelection();\n\t\t$('#fileManagerModal').modal('hide');\n\n\t};\n\n\treturn FileManager;\n\n\n})(Application.FileManager || {});"],"sourceRoot":"/source/"}